<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<link rel="stylesheet" type="text/css" media="screen" href="../../../../assets/css/symphony.css">
		<link rel="stylesheet" type="text/css" media="screen" href="../../../../assets/css/symphony.legacy.css">
		<link rel="stylesheet" type="text/css" media="screen" href="../../../../assets/css/symphony.grids.css">
		<link rel="stylesheet" type="text/css" media="screen" href="../../../../assets/css/symphony.frames.css">
		<link rel="stylesheet" type="text/css" media="screen" href="../../../../assets/css/symphony.forms.css">
		<link rel="stylesheet" type="text/css" media="screen" href="../../../../assets/css/symphony.tables.css">
		<link rel="stylesheet" type="text/css" media="screen" href="../../../../assets/css/symphony.drawers.css">
		<link rel="stylesheet" type="text/css" media="screen" href="../../../../assets/css/symphony.tabs.css">
		<link rel="stylesheet" type="text/css" media="screen" href="../../../../assets/css/symphony.notices.css">
		<link rel="stylesheet" type="text/css" media="screen" href="../../../../assets/css/admin.css">
		<script type="text/javascript" src="../../../../assets/js/jquery.js"></script>
		<script type="text/javascript" src="../../../../assets/js/symphony.js"></script>
		<script type="text/javascript" src="../../../../assets/js/symphony.collapsible.js"></script>
		<script type="text/javascript" src="../../../../assets/js/symphony.orderable.js"></script>
		<script type="text/javascript" src="../../../../assets/js/symphony.selectable.js"></script>
		<script type="text/javascript" src="../../../../assets/js/symphony.duplicator.js"></script>
		<script type="text/javascript" src="../../../../assets/js/symphony.tags.js"></script>
		<script type="text/javascript" src="../../../../assets/js/symphony.pickable.js"></script>
		<script type="text/javascript" src="../../../../assets/js/symphony.timeago.js"></script>
		<script type="text/javascript" src="../../../../assets/js/symphony.notify.js"></script>
		<script type="text/javascript" src="../../../../assets/js/symphony.drawer.js"></script>
		<script type="text/javascript" src="../../../../assets/js/admin.js"></script>
		<script type="text/javascript">Symphony.Context.add('env', {"page-namespace":"\/blueprints\/utilities","0":"edit","1":"date-time"}); Symphony.Context.add('root', 'http://home/sym/symphony-2');</script>
		<title>date-time.xsl &ndash; Utilities &ndash; Symphony</title>
	</head>
	<body id="blueprints-utilities" class="edit date-time single">
		<div id="wrapper">
			<header id="header">
				<p class="notice">Your Symphony installation is up to date, but the installer was still detected. For security reasons, it should be removed. <a href="#remove">Remove installer?</a></p>
				<h1>
					<a href="../../../../../">Symphony CMS</a>
				</h1>
				<ul id="session">
					<li>
						<a href="../../../../system/authors/edit/1/" data-id="1" data-name="John" data-type="developer">John Smith</a>
					</li>
					<li>
						<a href="../../../../../" accesskey="l">Log out</a>
					</li>
				</ul>
				<nav id="nav">
					<ul class="content">
						<li>Content
							<ul>
								<li>
									<a href="../../../../publish/articles/">Articles</a>
								</li>
								<li>
									<a href="../../../../publish/categories/">Categories</a>
								</li>
								<li>
									<a href="../../../../publish/notes/">Notes</a>
								</li>
								<li>
									<a href="../../../../publish/comments/">Comments</a>
								</li>
								<li>
									<a href="../../../../publish/messages/">Messages</a>
								</li>
							</ul>
						</li>
					</ul>
					<ul class="structure">
						<li class="active">Blueprints
							<ul>
								<li>
									<a href="../../../../blueprints/pages/">Pages</a>
								</li>
								<li>
									<a href="../../../../blueprints/sections/">Sections</a>
								</li>
								<li>
									<a href="../../../../blueprints/datasources/">Data Sources</a>
								</li>
								<li>
									<a href="../../../../blueprints/events/">Events</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/">Utilities</a>
								</li>
							</ul>
						</li>
						<li>System
							<ul>
								<li>
									<a href="../../../../system/authors/">Authors</a>
								</li>
								<li>
									<a href="../../../../system/preferences/">Preferences</a>
								</li>
								<li>
									<a href="../../../../system/extensions/">Extensions</a>
								</li>
							</ul>
						</li>
					</ul>
				</nav>
			</header>
			<div id="context">
				<div id="breadcrumbs">
					<nav>
						<p>
							<a href="../../../../blueprints/utilities/">Utilities</a>
							<span class="sep">&#8250;</span>
						</p>
					</nav>
					<h2>date-time.xsl</h2>
				</div>
			</div>
			<div id="contents">
				<form action="../../../../blueprints/utilities/edit/date-time/" method="post" class="two columns">
					<fieldset class="primary column">
						<label>Name
							<input name="fields[name]" type="text" value="date-time.xsl">
						</label>
						<label>Body
							<textarea name="fields[body]" rows="30" cols="80" class="code">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;

&lt;!--

Description:

This is a date formatting utility. The named template &quot;format-date&quot; takes 2 parameters:

1. date - [required] takes an ISO date (2005-12-01)
2. format - [optional] takes a format string.

Format options:

Y - year in 4 digits e.g. 1981, 1992, 2008
y - year in 2 digits e.g. 81, 92, 08
M - month as a full word e.g. January, March, September
m - month in 3 letters e.g. Jan, Mar, Sep
N - month in digits without leading zero
n - month in digits with leading zero
D - day with suffix and no leading zero e.g. 1st, 23rd
d - day in digits with leading zero e.g. 01, 09, 12, 25
x - day in digits with no leading zero e.g. 1, 9, 12, 25
T - time in 24-hours e.g. 18:30
t - time in 12-hours e.g. 6:30pm
W - weekday as a full word e.g. Monday, Tuesday
w - weekday in 3 letters e.g. Mon, Tue, Wed

Examples:

M       =&gt; January
d M     =&gt; 21 September
m D, y  =&gt; Sep 21st, 81
n-d-y   =&gt; 09-21-81
d/n/y   =&gt; 21/09/81
d/n/y t =&gt; 21/09/81 6:30pm

--&gt;

&lt;xsl:template name=&quot;format-date&quot;&gt;
	&lt;xsl:param name=&quot;date&quot;/&gt;
	&lt;xsl:param name=&quot;format&quot; select=&quot;'D M, Y'&quot;/&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;string-length($format) &amp;lt;= 10&quot;&gt;
			&lt;xsl:call-template name=&quot;date-controller&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot;/&gt;
				&lt;xsl:with-param name=&quot;format&quot; select=&quot;$format&quot;/&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:text&gt;Error: format parameter is not correctly set. You have: &lt;/xsl:text&gt;
			&lt;xsl:value-of select=&quot;string-length($format)&quot;/&gt;
			&lt;xsl:text&gt;.&lt;/xsl:text&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name=&quot;date-controller&quot;&gt;
	&lt;xsl:param name=&quot;date&quot;/&gt;
	&lt;xsl:param name=&quot;format&quot;/&gt;
	&lt;xsl:param name=&quot;letter&quot; select=&quot;substring($format,1,1)&quot;/&gt;
	&lt;xsl:param name=&quot;tletter&quot; select=&quot;translate($letter,'DMNYTW','dmnytw')&quot;/&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$tletter = 'y'&quot;&gt;
			&lt;xsl:call-template name=&quot;format-year&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot;/&gt;
				&lt;xsl:with-param name=&quot;format&quot; select=&quot;$letter&quot;/&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$tletter = 'm'&quot;&gt;
			&lt;xsl:call-template name=&quot;format-month&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot;/&gt;
				&lt;xsl:with-param name=&quot;format&quot; select=&quot;$letter&quot;/&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$tletter = 'n'&quot;&gt;
			&lt;xsl:call-template name=&quot;format-month&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot;/&gt;
				&lt;xsl:with-param name=&quot;format&quot; select=&quot;$letter&quot;/&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$tletter = 'd'&quot;&gt;
			&lt;xsl:call-template name=&quot;format-day&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot;/&gt;
				&lt;xsl:with-param name=&quot;format&quot; select=&quot;$letter&quot;/&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$tletter = 'x'&quot;&gt;
			&lt;xsl:call-template name=&quot;format-day&quot;&gt;
				&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot;/&gt;
				&lt;xsl:with-param name=&quot;format&quot; select=&quot;$letter&quot;/&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$tletter = 't'&quot;&gt;
			&lt;xsl:call-template name=&quot;format-time&quot;&gt;
				&lt;xsl:with-param name=&quot;time&quot; select=&quot;$date/@time&quot;/&gt;
				&lt;xsl:with-param name=&quot;format&quot; select=&quot;$letter&quot;/&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$tletter = 'w'&quot;&gt;
			&lt;xsl:call-template name=&quot;format-weekday&quot;&gt;
				&lt;xsl:with-param name=&quot;weekday&quot; select=&quot;$date/@weekday&quot;/&gt;
				&lt;xsl:with-param name=&quot;format&quot; select=&quot;$letter&quot;/&gt;
			&lt;/xsl:call-template&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:otherwise&gt;
			&lt;xsl:value-of select=&quot;$letter&quot;/&gt;
		&lt;/xsl:otherwise&gt;
	&lt;/xsl:choose&gt;
	&lt;xsl:if test=&quot;$letter = not('')&quot;&gt;
		&lt;xsl:call-template name=&quot;date-controller&quot;&gt;
			&lt;xsl:with-param name=&quot;date&quot; select=&quot;$date&quot;/&gt;
			&lt;xsl:with-param name=&quot;format&quot; select=&quot;substring($format,2)&quot;/&gt;
		&lt;/xsl:call-template&gt;
	&lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name=&quot;format-year&quot;&gt;
	&lt;xsl:param name=&quot;date&quot;/&gt;
	&lt;xsl:param name=&quot;year&quot; select=&quot;substring($date,1,4)&quot;/&gt;
	&lt;xsl:param name=&quot;format&quot; select=&quot;'y'&quot;/&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$format = 'y'&quot;&gt;
			&lt;xsl:value-of select=&quot;substring($year,3)&quot;/&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$format = 'Y'&quot;&gt;
			&lt;xsl:value-of select=&quot;$year&quot;/&gt;
		&lt;/xsl:when&gt;
	&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name=&quot;format-month&quot;&gt;
	&lt;xsl:param name=&quot;date&quot;/&gt;
	&lt;xsl:param name=&quot;month&quot; select=&quot;format-number(substring($date,6,2), '##')&quot;/&gt;
	&lt;xsl:param name=&quot;format&quot; select=&quot;'m'&quot;/&gt;
	&lt;xsl:param name=&quot;month-word&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;$month = 01&quot;&gt;January&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 02&quot;&gt;February&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 03&quot;&gt;March&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 04&quot;&gt;April&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 05&quot;&gt;May&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 06&quot;&gt;June&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 07&quot;&gt;July&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 08&quot;&gt;August&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 09&quot;&gt;September&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 10&quot;&gt;October&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 11&quot;&gt;November&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;$month = 12&quot;&gt;December&lt;/xsl:when&gt;
		&lt;/xsl:choose&gt;
	&lt;/xsl:param&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$format = 'm'&quot;&gt;
			&lt;xsl:value-of select=&quot;substring($month-word, 1,3)&quot;/&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$format = 'M'&quot;&gt;
			&lt;xsl:value-of select=&quot;$month-word&quot;/&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$format = 'n'&quot;&gt;
			&lt;xsl:value-of select=&quot;format-number($month, '00')&quot;/&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$format = 'N'&quot;&gt;
			&lt;xsl:value-of select=&quot;format-number($month, '0')&quot;/&gt;
		&lt;/xsl:when&gt;
	&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name=&quot;format-day&quot;&gt;
	&lt;xsl:param name=&quot;date&quot;/&gt;
	&lt;xsl:param name=&quot;day&quot; select=&quot;format-number(substring($date,9,2),'00')&quot;/&gt;
	&lt;xsl:param name=&quot;format&quot; select=&quot;'d'&quot;/&gt;
	&lt;xsl:param name=&quot;suffix&quot;&gt;
		&lt;xsl:choose&gt;
			&lt;xsl:when test=&quot;(substring($day,2) = 1) and not(substring($day,1,1) = 1)&quot;&gt;st&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;(substring($day,2) = 2) and not(substring($day,1,1) = 1)&quot;&gt;nd&lt;/xsl:when&gt;
			&lt;xsl:when test=&quot;(substring($day,2) = 3) and not(substring($day,1,1) = 1)&quot;&gt;rd&lt;/xsl:when&gt;
			&lt;xsl:otherwise&gt;th&lt;/xsl:otherwise&gt;
		&lt;/xsl:choose&gt;
	&lt;/xsl:param&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$format = 'd'&quot;&gt;
			&lt;xsl:value-of select=&quot;$day&quot;/&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$format = 'x'&quot;&gt;
			&lt;xsl:value-of select=&quot;format-number($day,'0')&quot;/&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$format = 'D'&quot;&gt;
			&lt;xsl:value-of select=&quot;format-number($day,'0')&quot;/&gt;
			&lt;xsl:value-of select=&quot;$suffix&quot;/&gt;
		&lt;/xsl:when&gt;
	&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name=&quot;format-time&quot;&gt;
	&lt;xsl:param name=&quot;time&quot;/&gt;
	&lt;xsl:param name=&quot;hour&quot; select=&quot;substring-before($time, ':')&quot;/&gt;
	&lt;xsl:param name=&quot;minute&quot; select=&quot;substring-after($time, ':')&quot;/&gt;
	&lt;xsl:param name=&quot;format&quot; select=&quot;'T'&quot;/&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$format = 'T'&quot;&gt;
			&lt;xsl:value-of select=&quot;$time&quot;/&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$format = 't'&quot;&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;$hour mod 12 = 0&quot;&gt;12&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;&lt;xsl:value-of select=&quot;($hour mod 12)&quot;/&gt;&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
			&lt;xsl:value-of select=&quot;concat(':',$minute)&quot;/&gt;
			&lt;xsl:choose&gt;
				&lt;xsl:when test=&quot;$hour &amp;lt; 12&quot;&gt;am&lt;/xsl:when&gt;
				&lt;xsl:otherwise&gt;pm&lt;/xsl:otherwise&gt;
			&lt;/xsl:choose&gt;
		&lt;/xsl:when&gt;
	&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name=&quot;format-weekday&quot;&gt;
	&lt;xsl:param name=&quot;weekday&quot;/&gt;
	&lt;xsl:param name=&quot;format&quot; select=&quot;'w'&quot;/&gt;
	&lt;xsl:param name=&quot;result&quot;&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$weekday = 1&quot;&gt;Monday&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$weekday = 2&quot;&gt;Tuesday&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$weekday = 3&quot;&gt;Wednesday&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$weekday = 4&quot;&gt;Thursday&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$weekday = 5&quot;&gt;Friday&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$weekday = 6&quot;&gt;Saturday&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$weekday = 7&quot;&gt;Sunday&lt;/xsl:when&gt;
	&lt;/xsl:choose&gt;
	&lt;/xsl:param&gt;
	&lt;xsl:choose&gt;
		&lt;xsl:when test=&quot;$format = 'W'&quot;&gt;
			&lt;xsl:value-of select=&quot;$result&quot;/&gt;
		&lt;/xsl:when&gt;
		&lt;xsl:when test=&quot;$format = 'w'&quot;&gt;
			&lt;xsl:value-of select=&quot;substring($result,1,3)&quot;/&gt;
		&lt;/xsl:when&gt;
	&lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</textarea>
						</label>
					</fieldset>
					<div class="secondary column">
						<p class="label">Utilities</p>
						<div class="frame">
							<ul id="utilities">
								<li>
									<a href="../../../../blueprints/utilities/edit/date-time/">date-time.xsl</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/edit/get-archive/">get-archive.xsl</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/edit/get-article/">get-article.xsl</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/edit/get-comments/">get-comments.xsl</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/edit/get-drafts/">get-drafts.xsl</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/edit/get-images/">get-images.xsl</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/edit/get-notes/">get-notes.xsl</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/edit/master/">master.xsl</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/edit/navigation/">navigation.xsl</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/edit/page-title/">page-title.xsl</a>
								</li>
								<li>
									<a href="../../../../blueprints/utilities/edit/typography/">typography.xsl</a>
								</li>
							</ul>
						</div>
					</div>
					<div class="actions">
						<input name="action[save]" type="submit" value="Save Changes" accesskey="s">
						<button name="action[delete]" class="button confirm delete" title="Delete this utility" type="submit" accesskey="d" data-message="Are you sure you want to delete this Utility?">Delete</button>
					</div>
				</form>
			</div>
		</div>
	</body>
</html>
